<!DOCTYPE html>
<html lang="en">

<head>
  
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">
  
  <title>Working Around A Kernel Regression in Debian 13 | Jay&#x27;s blog</title>
  <link rel="canonical" href="index.html">
  
    

    <meta name="jaysherby" content="look-for-the-bear-necessities">
    <meta name="token" content="UYrFiQfxKASpZXoRraFW">

    <!-- Primary Meta Tags -->
<meta name="title" content="Working Around A Kernel Regression in Debian 13">
<meta name="description" content="I did a routine update/upgrade on my home server that runs Debian 13 today and restarted the machine since there was a kernel update and... POW! Machine is n...">

<!-- Open Graph / Facebook -->
<meta property="og:site_name" content="Jay&#x27;s blog">
<meta property="og:title" content="Working Around A Kernel Regression in Debian 13">
<meta property="og:type" content="article">
<meta property="og:url" content="https://jaysherby.com/working-around-a-kernel-regression-in-debian-13/">
<meta property="og:description" content="I did a routine update/upgrade on my home server that runs Debian 13 today and restarted the machine since there was a kernel update and... POW! Machine is n...">
<meta property="og:image" content="https://bear-images.sfo2.cdn.digitaloceanspaces.com/herman-1683556668-0.png">


<!-- Twitter -->
<meta property="twitter:card" content="summary">
<meta property="twitter:url" content="https://jaysherby.com/working-around-a-kernel-regression-in-debian-13/">
<meta property="twitter:title" content="Working Around A Kernel Regression in Debian 13">
<meta property="twitter:description" content="I did a routine update/upgrade on my home server that runs Debian 13 today and restarted the machine since there was a kernel update and... POW! Machine is n...">
<meta property="twitter:image" content="https://bear-images.sfo2.cdn.digitaloceanspaces.com/herman-1683556668-0.png">



<!-- Microdata -->
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "article",
    "name": "Working Around A Kernel Regression in Debian 13",
    "headline": "Working Around A Kernel Regression in Debian 13",
    "url": "https://jaysherby.com/working-around-a-kernel-regression-in-debian-13/",
    "description": "I did a routine update/upgrade on my home server that runs Debian 13 today and restarted the machine since there was a kernel update and... POW! Machine is n...",
    "image": "https://bear-images.sfo2.cdn.digitaloceanspaces.com/herman-1683556668-0.png"
  }
</script>
    <link rel="alternate" type="application/atom+xml" href="../feed/index.html" title="Jay&#x27;s blog">
    <link rel="alternate" type="application/rss+xml" href="../feed/index.html%3Ftype=rss" title="Jay&#x27;s blog">

  
    

    
    <link rel="stylesheet" href="../static/pygmentify/css/default.min.css">
  
  
  
    
        <link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3E%3Ctext%20y='.9em'%20font-size='90'%3Eüë®‚Äçüíª%3C/text%3E%3C/svg%3E">
    



  <style>
      
      
    :root {
    --width: 800px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color:  #8b6fcb;
    --code-background-color: #f2f2f2;
    --code-color: #222;
    --blockquote-color: #222;
}

@media (prefers-color-scheme: dark) {
    :root {
        --background-color: #01242e;
        --heading-color: #eee;
        --text-color: #ddd;
        --link-color: #8cc2dd;
        --visited-color:  #8b6fcb;
        --code-background-color: #000;
        --code-color: #ddd;
        --blockquote-color: #ccc;
    }
}

body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
}

h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
}

a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
}

a:hover {
    text-decoration: underline; 
}

nav a {
    margin-right: 8px;
}

strong, b {
    color: var(--heading-color);
}

button {
    margin: 0;
    cursor: pointer;
}

main {
    line-height: 1.6;
}

table {
    width: 100%;
}

hr {
    border: 0;
    border-top: 1px dashed;
}

img {
    max-width: 100%;
}

code {
    font-family: monospace;
    padding: 2px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
}

blockquote {
    border-left: 1px solid #999;
    color: var(--code-color);
    padding-left: 20px;
    font-style: italic;
}

footer {
    padding: 25px 0;
    text-align: center;
}

.title:hover {
    text-decoration: none;
}

.title h1 {
    font-size: 1.5em;
}

.inline {
    width: auto !important;
}

.highlight, .code {
    padding: 1px 15px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
}

/* blog post list */
ul.blog-posts {
    list-style-type: none;
    padding: unset;
}

ul.blog-posts li {
    display: flex;
}

ul.blog-posts li span {
    flex: 0 0 130px;
}

ul.blog-posts li a:visited {
    color: var(--visited-color);
}

/* Make embedded images centered and interrupt content */
main img {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/* Give hint that <details> are clickable to reveal more */
details > summary {
  cursor: pointer;
}

/* Use Monokai code highlighting theme in dark mode */
@media (prefers-color-scheme: dark) {
  .hll { background-color: #49483e }
  .c { color: #75715e } /* Comment */
  .err { color: #960050; background-color: #1e0010 } /* Error */
  .k { color: #66d9ef } /* Keyword */
  .l { color: #ae81ff } /* Literal */
  .n { color: #f8f8f2 } /* Name */
  .o { color: #f92672 } /* Operator */
  .p { color: #f8f8f2 } /* Punctuation */
  .ch { color: #75715e } /* Comment.Hashbang */
  .cm { color: #75715e } /* Comment.Multiline */
  .cp { color: #75715e } /* Comment.Preproc */
  .cpf { color: #75715e } /* Comment.PreprocFile */
  .c1 { color: #75715e } /* Comment.Single */
  .cs { color: #75715e } /* Comment.Special */
  .gd { color: #f92672 } /* Generic.Deleted */
  .ge { font-style: italic } /* Generic.Emph */
  .gi { color: #a6e22e } /* Generic.Inserted */
  .gs { font-weight: bold } /* Generic.Strong */
  .gu { color: #75715e } /* Generic.Subheading */
  .kc { color: #66d9ef } /* Keyword.Constant */
  .kd { color: #66d9ef } /* Keyword.Declaration */
  .kn { color: #f92672 } /* Keyword.Namespace */
  .kp { color: #66d9ef } /* Keyword.Pseudo */
  .kr { color: #66d9ef } /* Keyword.Reserved */
  .kt { color: #66d9ef } /* Keyword.Type */
  .ld { color: #e6db74 } /* Literal.Date */
  .m { color: #ae81ff } /* Literal.Number */
  .s { color: #e6db74 } /* Literal.String */
  .na { color: #a6e22e } /* Name.Attribute */
  .nb { color: #f8f8f2 } /* Name.Builtin */
  .nc { color: #a6e22e } /* Name.Class */
  .no { color: #66d9ef } /* Name.Constant */
  .nd { color: #a6e22e } /* Name.Decorator */
  .ni { color: #f8f8f2 } /* Name.Entity */
  .ne { color: #a6e22e } /* Name.Exception */
  .nf { color: #a6e22e } /* Name.Function */
  .nl { color: #f8f8f2 } /* Name.Label */
  .nn { color: #f8f8f2 } /* Name.Namespace */
  .nx { color: #a6e22e } /* Name.Other */
  .py { color: #f8f8f2 } /* Name.Property */
  .nt { color: #f92672 } /* Name.Tag */
  .nv { color: #f8f8f2 } /* Name.Variable */
  .ow { color: #f92672 } /* Operator.Word */
  .w { color: #f8f8f2 } /* Text.Whitespace */
  .mb { color: #ae81ff } /* Literal.Number.Bin */
  .mf { color: #ae81ff } /* Literal.Number.Float */
  .mh { color: #ae81ff } /* Literal.Number.Hex */
  .mi { color: #ae81ff } /* Literal.Number.Integer */
  .mo { color: #ae81ff } /* Literal.Number.Oct */
  .sa { color: #e6db74 } /* Literal.String.Affix */
  .sb { color: #e6db74 } /* Literal.String.Backtick */
  .sc { color: #e6db74 } /* Literal.String.Char */
  .dl { color: #e6db74 } /* Literal.String.Delimiter */
  .sd { color: #e6db74 } /* Literal.String.Doc */
  .s2 { color: #e6db74 } /* Literal.String.Double */
  .se { color: #ae81ff } /* Literal.String.Escape */
  .sh { color: #e6db74 } /* Literal.String.Heredoc */
  .si { color: #e6db74 } /* Literal.String.Interpol */
  .sx { color: #e6db74 } /* Literal.String.Other */
  .sr { color: #e6db74 } /* Literal.String.Regex */
  .s1 { color: #e6db74 } /* Literal.String.Single */
  .ss { color: #e6db74 } /* Literal.String.Symbol */
  .bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
  .fm { color: #a6e22e } /* Name.Function.Magic */
  .vc { color: #f8f8f2 } /* Name.Variable.Class */
  .vg { color: #f8f8f2 } /* Name.Variable.Global */
  .vi { color: #f8f8f2 } /* Name.Variable.Instance */
  .vm { color: #f8f8f2 } /* Name.Variable.Magic */
  .il { color: #ae81ff } /* Literal.Number.Integer.Long */
}
    .upvote-button {
        padding: 0;
        margin: 0;
        border: 0;
        background-color: inherit;
        color: inherit;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .upvote-button.upvoted {
        color: salmon;
    }
    .upvote-count {
        margin-top: -3px;
    }

      
  </style>
</head>

<body class="post " onload="(function() { document.cookie = `timezone=${Intl.DateTimeFormat().resolvedOptions().timeZone};path=/`; })()">
  
  <header>
    <a class="title" href="../index.html">
      <h1>
        Jay&#x27;s blog
      </h1>
    </a>
    <nav>
      <p><a href='../index.html'>Home</a> <a href='../resume/index.html'>R√©sum√©</a> <a href='../blog/index.html'>Blog</a></p>

    </nav>
  </header>
  <main>
    

    

    
        <h1>Working Around A Kernel Regression in Debian 13</h1>

        <p>
            <i>
                <time datetime="2025-12-14T23:18Z">
    14 Dec, 2025
</time>
            </i>
        </p>
    

    <p>I did a routine update/upgrade on my home server that runs Debian 13 today and restarted the machine since there was a kernel update and... POW! Machine is no longer on the network. Serves me right for keeping up to date.</p>
<p>A quick look around determined that <code>networking.service</code> is failing because my network device doesn't exist. The logs confirm that the iwlwifi driver is having an oopsy.</p>
<div class="highlight"><pre><span></span>Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: enabling device (0000 -&gt; 0002)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Detected crf-id 0x2001910, cnv-id 0x2001910 wfpm id 0x80000000
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: PCI dev 272b/00f4, rev=0x472, rfid=0x112200
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Detected Intel(R) Wi-Fi 7 BE200 320MHz
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-102.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-102.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-102.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-102.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-101.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-101.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-101.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-101.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-100.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-100.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-100.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-100.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-99.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-99.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-99.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-99.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-98.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-98.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-98.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-98.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: no suitable firmware found!
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: minimum version required: iwlwifi-gl-c0-fm-c0-98
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: maximum version supported: iwlwifi-gl-c0-fm-c0-102
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: check git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git
</pre></div>
<p>I rebooted and selected the previous kernel from the Grub boot menu and wifi works again. The old, working kernel is <code>linux-image-6.16.3+deb13-amd64</code> whereas the new, broken kernel is <code>linux-image-6.17.8+deb13-amd64</code>. Both are provided by the bookworm-backports package repository.</p>
<p>A quick web search found <a href='https://gitlab.archlinux.org/archlinux/packaging/packages/linux/-/issues/161'>a lovely issue</a> filed over at Arch Linux that describes the exact issue I'm experiencing. This bug is upstream in the kernel itself.</p>
<p>This put me in a peculiar situation. I need to stay on the old kernel until this is fixed. In the meantime, I want to continue receiving new kernel versions when I update my system so I can test if the issue has been fixed. But until that happens, I want to continue using the known-working kernel.</p>
<p>The solution I chose was to change my Grub configuration slightly. There's a line in <code>/etc/default/grub</code> that looks like this:</p>
<div class="highlight"><pre><span></span>GRUB_DEFAULT=0
</pre></div>
<p>That makes Grub boot with the first menu entry by default, which is the newest kernel. I changed it.</p>
<div class="highlight"><pre><span></span>#GRUB_DEFAULT=0
GRUB_DEFAULT=saved
GRUB_SAVEDEFAULT=true
</pre></div>
<p>After running <code>sudo update-grub</code>, Grub now remembers the last option I chose and uses that by default. I had to reboot one more time to choose the preferred kernel so it would remember after I changed this setting.</p>
<p>This meets all of my desired criteria. As long as I don't uninstall <code>linux-image-6.16.3+deb13-amd64</code>, I should be able to receive new kernel versions and test them at my leisure without worrying that any subsequent updates and reboots might make my system drop off the network again.</p>
<p>Although experiencing a kernel regression is annoying, this is the first instance of a regression that has affected me personally in probably two decades. I'm happy it wasn't my fault. And I'm grateful it was easy to diagnose and work around it.</p>


    

    
        
            <p class="tags">
                <a rel="nofollow" href="https://jaysherby.com/blog/?q=pot-of-honey" style="display:none;">#potofhoney</a>
                
                    <a rel="nofollow" href="https://jaysherby.com/blog/?q=grub">#grub</a>
                
                    <a rel="nofollow" href="https://jaysherby.com/blog/?q=home&#32;server">#home server</a>
                
            </p>
        

        
            <form id="upvote-form" action="https://jaysherby.com/upvote/" method="post" style="display: inline">
    <small>
        <input hidden name="uid" value="UYrFiQfxKASpZXoRraFW" style="display:none">
        <input hidden name="title" value="Working Around A Kernel Regression in Debian 13" style="display:none">

        <button
            class="upvote-button"
            title="Toast this post"
        >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1">
                <polyline points="17 11 12 6 7 11"></polyline>
                <polyline points="17 18 12 13 7 18"></polyline>
            </svg>
            <small class="upvote-count">&nbsp;</small>
        </button>
    </small>        
</form>

<script>
    const $upvoteButton = document.querySelector('.upvote-button');

    fetch('/upvote-info/UYrFiQfxKASpZXoRraFW/').then(response => response.json()).then(data => {
        document.querySelector('.upvote-count').innerText = data.upvote_count;
        if (data.upvoted) {
            $upvoteButton.disabled = true
            $upvoteButton.style.color = "salmon"
            $upvoteButton.title = "Toasted"
        }
    });

    let moved = false;
    let pageLoaded = Date.now();

    document.addEventListener('touchmove', () => moved = true);
    document.addEventListener('mousemove', () => moved = true);

    document.querySelector('#upvote-form').addEventListener('submit', (e) => {
        e.preventDefault();

        if (moved) {
            document.querySelector('input[name="title"]').value = "";
        }
        if (Date.now() - pageLoaded < 2000 || !moved) {
            return;
        }

        fetch(e.target.action, {
            method: 'post',
            body: new FormData(e.target),
        });
        
        $upvoteButton.disabled = true
        $upvoteButton.style.color = "salmon"
        $upvoteButton.title = "Toasted"
        const upvoteCount = document.querySelector('.upvote-count')
        upvoteCount.innerHTML = `${(parseInt(upvoteCount.innerHTML.split(" ")[0]) + 1)}`
    });
</script>
        

        
            <script>
            window.addEventListener("load", () => {
                if (navigator.webdriver !== true) {
                    const sendHit = score => {
                        const params = new URLSearchParams({
                            blog: "jaysherby",
                            token: "UYrFiQfxKASpZXoRraFW",
                            referrer: document.referrer.includes("jaysherby.com") ? "" : document.referrer,
                            title: "",
                            score: score
                        });
                        new Image().src = `/hit/?${params.toString()}`;
                    };

                    document.addEventListener('touchmove', () => sendHit(100), { once: true });
                    document.addEventListener('mousemove', () => sendHit(100), { once: true });
                }
            });
            </script>
        
    


  </main>
  <footer style="padding:25px 0;">
    
    
    <span>
        Powered by <a href="https://bearblog.dev">Bear <span role="img" class="bear" aria-label="ASCII bear logo"> ï‚Ä¢·¥•‚Ä¢ î</span></a>
    </span>

  </footer>

  
  <script>
        (() => {
          "use strict";
          const times = document.querySelectorAll('time');
          const format_string = "" || "d M, Y"

          times.forEach(time => {
              time.innerText = formatDate(time.dateTime, format_string)
          });

          function formatDate(dateStr, formatStr) {
            const date = new Date(dateStr);
            const day = date.getDate();
            const month = date.getMonth();
            const year = date.getFullYear();
            const weekday = date.getDay();
            const hours = date.getHours();
            const minutes = date.getMinutes();
            const monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const monthsShort = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const daysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const daysShort = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            function getOrdinal(n) {
                const s = ['th', 'st', 'nd', 'rd'];
                const v = n % 100;
                return s[(v - 20) % 10] || s[v] || s[0];
            }
            
            const map = {
                'd': () => day.toString().padStart(2, '0'),
                'm': () => (month + 1).toString().padStart(2, '0'),
                'Y': () => year.toString(),
                'y': () => year.toString().slice(-2),
                'F': () => monthsFull[month],
                'j': () => day.toString(),
                'D': () => daysShort[weekday],
                'l': () => daysFull[weekday],
                'S': () => getOrdinal(day),
                'M': () => monthsShort[month],
                'H': () => hours.toString().padStart(2, '0'),
                'h': () => {
                    let h = hours % 12;
                    h = h === 0 ? 12 : h;
                    return h.toString().padStart(2, '0');
                },
                'g': () => {
                    let h = hours % 12;
                    return h === 0 ? '12' : h.toString();
                },
                'i': () => minutes.toString().padStart(2, '0'),
                'a': () => hours < 12 ? 'am' : 'pm',
                'A': () => hours < 12 ? 'AM' : 'PM',
            };
            
            let result = '';
            for (let char of formatStr) {
                result += map[char] ? map[char]() : char;
            }
            return result;
        }
        })();
    </script>
    
</body>
</html>