<!DOCTYPE html>
<html lang="en">

<head>
  
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">
  
  <title>Tips For Becoming A Pod Person | Jay&#x27;s blog</title>
  <link rel="canonical" href="index.html">
  
    

    <meta name="jaysherby" content="look-for-the-bear-necessities">

    <!-- Primary Meta Tags -->
<meta name="title" content="Tips For Becoming A Pod Person">
<meta name="description" content="

I made the leap from Docker to Podman.  Well... only on my personal laptop. Podman isn&#x27;t a completely hassle-free, drop-in replacement for Docker.  It&#x27;s ...">

<!-- Open Graph / Facebook -->
<meta property="og:site_name" content="Jay&#x27;s blog">
<meta property="og:title" content="Tips For Becoming A Pod Person">
<meta property="og:type" content="article">
<meta property="og:url" content="https://jaysherby.com/tips-for-becoming-a-pod-person/">
<meta property="og:description" content="

I made the leap from Docker to Podman.  Well... only on my personal laptop. Podman isn&#x27;t a completely hassle-free, drop-in replacement for Docker.  It&#x27;s ...">
<meta property="og:image" content="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby-1679176611-0.png">


<!-- Twitter -->
<meta property="twitter:card" content="summary">
<meta property="twitter:url" content="https://jaysherby.com/tips-for-becoming-a-pod-person/">
<meta property="twitter:title" content="Tips For Becoming A Pod Person">
<meta property="twitter:description" content="

I made the leap from Docker to Podman.  Well... only on my personal laptop. Podman isn&#x27;t a completely hassle-free, drop-in replacement for Docker.  It&#x27;s ...">
<meta property="twitter:image" content="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby-1679176611-0.png">



<!-- Microdata -->
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "article",
    "name": "Tips For Becoming A Pod Person",
    "headline": "Tips For Becoming A Pod Person",
    "url": "https://jaysherby.com/tips-for-becoming-a-pod-person/",
    "description": "

I made the leap from Docker to Podman.  Well... only on my personal laptop. Podman isn&#x27;t a completely hassle-free, drop-in replacement for Docker.  It&#x27;s ...",
    "image": "https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby-1679176611-0.png"
  }
</script>
    <link rel="alternate" type="application/atom+xml" href="../feed/index.html" title="Jay&#x27;s blog">
    <link rel="alternate" type="application/rss+xml" href="../feed/index.html%3Ftype=rss" title="Jay&#x27;s blog">

  
    

    
    <link rel="stylesheet" href="../static/pygmentify/css/default.min.css">
  
  
  
    
        <link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3E%3Ctext%20y='.9em'%20font-size='90'%3Eüë®‚Äçüíª%3C/text%3E%3C/svg%3E">
    



  <style>
      
      
    :root {
    --width: 800px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color:  #8b6fcb;
    --code-background-color: #f2f2f2;
    --code-color: #222;
    --blockquote-color: #222;
}

@media (prefers-color-scheme: dark) {
    :root {
        --background-color: #01242e;
        --heading-color: #eee;
        --text-color: #ddd;
        --link-color: #8cc2dd;
        --visited-color:  #8b6fcb;
        --code-background-color: #000;
        --code-color: #ddd;
        --blockquote-color: #ccc;
    }
}

body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
}

h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
}

a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
}

a:hover {
    text-decoration: underline; 
}

nav a {
    margin-right: 8px;
}

strong, b {
    color: var(--heading-color);
}

button {
    margin: 0;
    cursor: pointer;
}

main {
    line-height: 1.6;
}

table {
    width: 100%;
}

hr {
    border: 0;
    border-top: 1px dashed;
}

img {
    max-width: 100%;
}

code {
    font-family: monospace;
    padding: 2px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
}

blockquote {
    border-left: 1px solid #999;
    color: var(--code-color);
    padding-left: 20px;
    font-style: italic;
}

footer {
    padding: 25px 0;
    text-align: center;
}

.title:hover {
    text-decoration: none;
}

.title h1 {
    font-size: 1.5em;
}

.inline {
    width: auto !important;
}

.highlight, .code {
    padding: 1px 15px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
}

/* blog post list */
ul.blog-posts {
    list-style-type: none;
    padding: unset;
}

ul.blog-posts li {
    display: flex;
}

ul.blog-posts li span {
    flex: 0 0 130px;
}

ul.blog-posts li a:visited {
    color: var(--visited-color);
}

/* Make embedded images centered and interrupt content */
main img {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/* Give hint that <details> are clickable to reveal more */
details > summary {
  cursor: pointer;
}

/* Use Monokai code highlighting theme in dark mode */
@media (prefers-color-scheme: dark) {
  .hll { background-color: #49483e }
  .c { color: #75715e } /* Comment */
  .err { color: #960050; background-color: #1e0010 } /* Error */
  .k { color: #66d9ef } /* Keyword */
  .l { color: #ae81ff } /* Literal */
  .n { color: #f8f8f2 } /* Name */
  .o { color: #f92672 } /* Operator */
  .p { color: #f8f8f2 } /* Punctuation */
  .ch { color: #75715e } /* Comment.Hashbang */
  .cm { color: #75715e } /* Comment.Multiline */
  .cp { color: #75715e } /* Comment.Preproc */
  .cpf { color: #75715e } /* Comment.PreprocFile */
  .c1 { color: #75715e } /* Comment.Single */
  .cs { color: #75715e } /* Comment.Special */
  .gd { color: #f92672 } /* Generic.Deleted */
  .ge { font-style: italic } /* Generic.Emph */
  .gi { color: #a6e22e } /* Generic.Inserted */
  .gs { font-weight: bold } /* Generic.Strong */
  .gu { color: #75715e } /* Generic.Subheading */
  .kc { color: #66d9ef } /* Keyword.Constant */
  .kd { color: #66d9ef } /* Keyword.Declaration */
  .kn { color: #f92672 } /* Keyword.Namespace */
  .kp { color: #66d9ef } /* Keyword.Pseudo */
  .kr { color: #66d9ef } /* Keyword.Reserved */
  .kt { color: #66d9ef } /* Keyword.Type */
  .ld { color: #e6db74 } /* Literal.Date */
  .m { color: #ae81ff } /* Literal.Number */
  .s { color: #e6db74 } /* Literal.String */
  .na { color: #a6e22e } /* Name.Attribute */
  .nb { color: #f8f8f2 } /* Name.Builtin */
  .nc { color: #a6e22e } /* Name.Class */
  .no { color: #66d9ef } /* Name.Constant */
  .nd { color: #a6e22e } /* Name.Decorator */
  .ni { color: #f8f8f2 } /* Name.Entity */
  .ne { color: #a6e22e } /* Name.Exception */
  .nf { color: #a6e22e } /* Name.Function */
  .nl { color: #f8f8f2 } /* Name.Label */
  .nn { color: #f8f8f2 } /* Name.Namespace */
  .nx { color: #a6e22e } /* Name.Other */
  .py { color: #f8f8f2 } /* Name.Property */
  .nt { color: #f92672 } /* Name.Tag */
  .nv { color: #f8f8f2 } /* Name.Variable */
  .ow { color: #f92672 } /* Operator.Word */
  .w { color: #f8f8f2 } /* Text.Whitespace */
  .mb { color: #ae81ff } /* Literal.Number.Bin */
  .mf { color: #ae81ff } /* Literal.Number.Float */
  .mh { color: #ae81ff } /* Literal.Number.Hex */
  .mi { color: #ae81ff } /* Literal.Number.Integer */
  .mo { color: #ae81ff } /* Literal.Number.Oct */
  .sa { color: #e6db74 } /* Literal.String.Affix */
  .sb { color: #e6db74 } /* Literal.String.Backtick */
  .sc { color: #e6db74 } /* Literal.String.Char */
  .dl { color: #e6db74 } /* Literal.String.Delimiter */
  .sd { color: #e6db74 } /* Literal.String.Doc */
  .s2 { color: #e6db74 } /* Literal.String.Double */
  .se { color: #ae81ff } /* Literal.String.Escape */
  .sh { color: #e6db74 } /* Literal.String.Heredoc */
  .si { color: #e6db74 } /* Literal.String.Interpol */
  .sx { color: #e6db74 } /* Literal.String.Other */
  .sr { color: #e6db74 } /* Literal.String.Regex */
  .s1 { color: #e6db74 } /* Literal.String.Single */
  .ss { color: #e6db74 } /* Literal.String.Symbol */
  .bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
  .fm { color: #a6e22e } /* Name.Function.Magic */
  .vc { color: #f8f8f2 } /* Name.Variable.Class */
  .vg { color: #f8f8f2 } /* Name.Variable.Global */
  .vi { color: #f8f8f2 } /* Name.Variable.Instance */
  .vm { color: #f8f8f2 } /* Name.Variable.Magic */
  .il { color: #ae81ff } /* Literal.Number.Integer.Long */
}
    .upvote-button {
        padding: 0;
        margin: 0;
        border: 0;
        background-color: inherit;
        color: inherit;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .upvote-button.upvoted {
        color: salmon;
    }
    .upvote-count {
        margin-top: -3px;
    }

      
  </style>
</head>

<body class="post " onload="(function() { document.cookie = `timezone=${Intl.DateTimeFormat().resolvedOptions().timeZone};path=/`; })()">
  
  <header>
    <a class="title" href="../index.html">
      <h1>
        Jay&#x27;s blog
      </h1>
    </a>
    <nav>
      <p><a href='../index.html'>Home</a> <a href='../resume/index.html'>R√©sum√©</a> <a href='../blog/index.html'>Blog</a></p>

    </nav>
  </header>
  <main>
    

    

    
        <h1>Tips For Becoming A Pod Person</h1>

        <p>
            <i>
                <time datetime="2023-03-16T00:36Z">
    16 Mar, 2023
</time>
            </i>
        </p>
    

    <p><img src="../../bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby-1679176611-0.png" alt="" title="Original art, with apologies to Donald Sutherland" /></p>
<p>I made the leap from Docker to Podman.  Well... only on my personal laptop. Podman isn't a completely hassle-free, drop-in replacement for Docker.  It's damn close!  Close enough that I'm willing to use it at home, but it's still finicky and different enough that I'd spend too much time futzing at work trying to use it while keeping everything Docker-compatible for my colleagues.</p>
<p>Here are some tips if, like me, you're coming from Docker and you just want to get productive.</p>
<h2 id=i-need-docker-compose>I need Docker Compose</h2><p>A large part of Docker's value to me comes from Docker Compose. If switching to Podman meant losing Docker Compose, I wouldn't have switched.</p>
<p>Thankfully, Pop!_OS (and probably any other platforms that include Podman in their repos) has a package called <code>podman-docker</code> that satisfies packages that depend on Docker. Just make sure you install <code>podman-docker</code> before or at the same time as <code>docker-compose</code> so APT doesn't try to install Docker to satisfy Docker Compose's dependencies.</p>
<p>If you're feeling adventurous, <a href='https://github.com/containers/podman-compose'>Podman Compose</a> is a thing. But it's not available via my OS's default repositories and Docker Compose is.</p>
<h3 id=permissionerror-errno-13-permission-denied>PermissionError: [Errno 13] Permission denied</h3><p>I recently received this error when I tried running Docker Compose. I had already installed <code>podman-docker</code> like I mentioned. The solution was to add this to my <code>.bash_profile</code>:</p>
<div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">DOCKER_HOST</span><span class="o">=</span>unix:///run/user/<span class="nv">$UID</span>/podman/podman.sock
</pre></div>
<h2 id=i-need-docker-hub>I need Docker Hub</h2><p>I also wouldn't use Podman if it meant I lost Docker Hub.</p>
<p>The easiest way to get access to Docker Hub with Podman is to write the following file to <code>$HOME/.config/containers/registries.conf</code>:<sup class="footnote-ref" id="fnref-1"><a href="index.html#fn-1">1</a></sup></p>
<div class="highlight"><pre><span></span>[registries.search]
registries = [&#39;docker.io&#39;]
</pre></div>
<h2 id=potentially-insufficient-uids-or-gids-available-in-user-namespace>Potentially insufficient UIDs or GIDs available in user namespace</h2><p>I had just installed Podman and I wanted use the NodeJS image from Docker Hub.</p>
<div class="highlight"><pre><span></span>$ podman run -it --rm node
Resolving &quot;node&quot; using unqualified-search registries (/home/jsherby/.config/containers/registries.conf)
Trying to pull docker.io/library/node:latest...
Getting image source signatures
Copying blob ca3bce705f6c done  
Copying blob 167c7feebee8 done  
Copying blob e9cdcd4942eb done  
Copying blob 32fb02163b6b done  
Copying blob d6dfff1f6f3d done  
Copying blob 4f4cf292bc62 done  
Copying blob 8347f8b4b86b done  
Copying blob c5f20f1b0856 done  
Copying blob d220dfa3e187 done  
Error: writing blob: adding layer with blob &quot;sha256:32fb02163b6bb519a30f909008e852354dae10bdfd6b34190dbdfe8f15403ea0&quot;: Error processing tar file(exit status 1): potentially insufficient UIDs or GIDs available in user namespace (requested 0:42 for /etc/gshadow): Check /etc/subuid and /etc/subgid: lchown /etc/gshadow: invalid argument
</pre></div>
<p>This seems to be a common issue.</p>
<p>First, make sure the <code>fuse-overlayfs</code> package is installed.</p>
<p>If you look around the internet, you're going to find advice telling you to add the following file at <code>$HOME/.config/containers/storage.conf</code>:<sup class="footnote-ref" id="fnref-2"><a href="index.html#fn-2">2</a></sup></p>
<div class="highlight"><pre><span></span>[storage]
driver = &quot;overlay&quot;

[storage.options.overlay]
ignore_chown_errors = &quot;true&quot;
</pre></div>
<p><strong>BUT BE WARNED!</strong> This change is meaningful and makes Podman behave differently than you probably expect. I'll quote the manual directly.</p>
<blockquote>
<p>ignore_chown_errors can be set to allow a non privileged user running with a single UID within a user namespace to run containers. The user can pull and use any image even those with multiple uids. Note multiple UIDs will be squashed down to the default uid in the container. These images will have no separation between the users in the container.</p>
</blockquote>
<p>Although this setup will make Podman stop complaining, there's a good chance this will bite you in the ass later on, especially if you're trying to stay compatible with Docker.</p>
<p>Instead, I added my user to <code>/etc/subuid</code> and <code>/etc/subgid</code>.  Here's what both files look like on my machine:<sup class="footnote-ref" id="fnref-3"><a href="index.html#fn-3">3</a></sup></p>
<div class="highlight"><pre><span></span>jsherby:100000:65536
</pre></div>
<p>Then I ran <code>podman system migrate</code> and I was good to go.</p>
<hr />
<section class="footnotes">
<ol>
<li id="fn-1"><p><code>/etc/containers/registries.conf</code> is the equivalent system-wide config file.<a href="index.html#fnref-1" class="footnote">&#8617;</a></p></li>
<li id="fn-2"><p><code>/etc/containers/storage.conf</code> is the equivalent system-wide config file.<a href="index.html#fnref-2" class="footnote">&#8617;</a></p></li>
<li id="fn-3"><p>When supporting namespaces for multiple users, the middle value needs to be offset so the namespaces don't overlap. Check the man pages that come with your local <code>shadow</code> package for details.<a href="index.html#fnref-3" class="footnote">&#8617;</a></p></li>
</ol>
</section>


    

    
        
            <p class="tags">
                
                    <a href="https://jaysherby.com/blog/?q=docker">#docker</a>
                
                    <a href="https://jaysherby.com/blog/?q=podman">#podman</a>
                
            </p>
        

        
            <form id="upvote-form" action="https://jaysherby.com/upvote/" method="post" style="display: inline">
    <small>
        <input hidden name="uid" value="iNICPIvAGbKFWececxEJ" style="display:none">
        <input hidden name="title" value="Tips For Becoming A Pod Person" style="display:none">

        <button
            class="upvote-button"
            title="Toast this post"
        >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1">
                <polyline points="17 11 12 6 7 11"></polyline>
                <polyline points="17 18 12 13 7 18"></polyline>
            </svg>
            <small class="upvote-count">&nbsp;</small>
        </button>
    </small>        
</form>

<script>
    const $upvoteButton = document.querySelector('.upvote-button');

    fetch('/upvote-info/iNICPIvAGbKFWececxEJ/').then(response => response.json()).then(data => {
        document.querySelector('.upvote-count').innerText = data.upvote_count;
        if (data.upvoted) {
            $upvoteButton.disabled = true
            $upvoteButton.style.color = "salmon"
            $upvoteButton.title = "Toasted"
        }
    });

    let moved = false;
    let pageLoaded = Date.now();

    document.addEventListener('touchmove', () => moved = true);
    document.addEventListener('mousemove', () => moved = true);

    document.querySelector('#upvote-form').addEventListener('submit', (e) => {
        e.preventDefault();

        if (moved) {
            document.querySelector('input[name="title"]').value = "";
        }
        if (Date.now() - pageLoaded < 2000 || !moved) {
            return;
        }

        fetch(e.target.action, {
            method: 'post',
            body: new FormData(e.target),
        });
        
        $upvoteButton.disabled = true
        $upvoteButton.style.color = "salmon"
        $upvoteButton.title = "Toasted"
        const upvoteCount = document.querySelector('.upvote-count')
        upvoteCount.innerHTML = `${(parseInt(upvoteCount.innerHTML.split(" ")[0]) + 1)}`
    });
</script>
        

        
            <script>
            window.addEventListener("load", () => {
                if (navigator.webdriver !== true) {
                    const sendHit = score => {
                        const params = new URLSearchParams({
                            token: "iNICPIvAGbKFWececxEJ",
                            referrer: document.referrer.includes("jaysherby.com") ? "" : document.referrer,
                            title: "",
                            score: score
                        });
                        new Image().src = `/hit/?${params.toString()}`;
                    };

                    document.addEventListener('touchmove', () => sendHit(100), { once: true });
                    document.addEventListener('mousemove', () => sendHit(100), { once: true });
                }
            });
            </script>
        
    


  </main>
  <footer style="padding:25px 0;">
    
    
    <span>
        Powered by <a href="https://bearblog.dev">Bear <span role="img" class="bear" aria-label="ASCII bear logo"> ï‚Ä¢·¥•‚Ä¢ î</span></a>
    </span>

  </footer>

  
  <script>
        const times = document.querySelectorAll('time');
        const format_string = "" || "d M, Y"

        times.forEach(time => {
            time.innerText = formatDate(time.dateTime, format_string)
        });

        function formatDate(dateStr, formatStr) {
          const date = new Date(dateStr);
          const day = date.getDate();
          const month = date.getMonth();
          const year = date.getFullYear();
          const weekday = date.getDay();
          const hours = date.getHours();
          const minutes = date.getMinutes();
          const monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
          const monthsShort = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
          const daysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
          const daysShort = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
          
          function getOrdinal(n) {
              const s = ['th', 'st', 'nd', 'rd'];
              const v = n % 100;
              return s[(v - 20) % 10] || s[v] || s[0];
          }
          
          const map = {
              'd': () => day.toString().padStart(2, '0'),
              'm': () => (month + 1).toString().padStart(2, '0'),
              'Y': () => year.toString(),
              'y': () => year.toString().slice(-2),
              'F': () => monthsFull[month],
              'j': () => day.toString(),
              'D': () => daysShort[weekday],
              'l': () => daysFull[weekday],
              'S': () => getOrdinal(day),
              'M': () => monthsShort[month],
              'H': () => hours.toString().padStart(2, '0'),
              'h': () => {
                  let h = hours % 12;
                  h = h === 0 ? 12 : h;
                  return h.toString().padStart(2, '0');
              },
              'g': () => {
                  let h = hours % 12;
                  return h === 0 ? '12' : h.toString();
              },
              'i': () => minutes.toString().padStart(2, '0'),
              'a': () => hours < 12 ? 'am' : 'pm',
              'A': () => hours < 12 ? 'AM' : 'PM',
          };
          
          let result = '';
          for (let char of formatStr) {
              result += map[char] ? map[char]() : char;
          }
          return result;
      }
    </script>
    
</body>
</html>