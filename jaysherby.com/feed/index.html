<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>https://jaysherby.com</id>
  <title>Jay's blog</title>
  <author>
    <name>jaysherby</name>
    <email>hidden</email>
  </author>
  <link href="https://jaysherby.com/" rel="alternate"/>
  <link href="https://jaysherby.com/feed/" rel="self"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>&lt;h1 style="font-weight: normal"&gt;&#13;
  Hi! I'm &lt;strong&gt;Jay Sherby&lt;/strong&gt;!&#13;
&lt;/h1&gt;&#13;
&#13;
I'm an experienced software developer in Chicago.&#13;
&#13;
Hiring? Check my rÃ©su...</subtitle>
  <entry>
    <id>https://jaysherby.com/im-tired-of-typing-systemctl-user/</id>
    <title>I'm tired of typing "systemctl --user"</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;I chose to alias &lt;code&gt;systemctl --user&lt;/code&gt; since I use it so often. That's not blog post-worthy. What makes it so is that I didn't want to lose tab completion when using my alias.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Add this to your .bashrc&lt;/span&gt;

&lt;span class="nb"&gt;alias&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;scu&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;systemctl --user&amp;#39;&lt;/span&gt;
_completion_loader&lt;span class="w"&gt; &lt;/span&gt;systemctl
&lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;_scu_complete&lt;span class="o"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nv"&gt;COMP_WORDS&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;COMP_WORDS&lt;/span&gt;&lt;span class="p"&gt;[@]:&lt;/span&gt;&lt;span class="nv"&gt;1&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;COMP_CWORD++&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;_systemctl
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;complete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-F&lt;span class="w"&gt; &lt;/span&gt;_scu_complete&lt;span class="w"&gt; &lt;/span&gt;scu
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This little snippet ensures that tab completion still functions on the new &lt;code&gt;scu&lt;/code&gt; alias.&lt;/p&gt;
&lt;p&gt;I'll still type out &lt;code&gt;systemctl --user&lt;/code&gt; when appropriate in my documentation, but you best believe I'm going to be using &lt;code&gt;scu&lt;/code&gt; all the time besides.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/im-tired-of-typing-systemctl-user/" rel="alternate"/>
    <category term="systemd"/>
    <published>2026-02-27T00:33:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/multiple-mdns-a-records-with-a-dynamic-ip-address/</id>
    <title>Multiple mDNS A Records with a Dynamic IP Address</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;I have very specific needs for my home server. Before I jump into my slightly unusual solution, let me briefly explain my requirements.&lt;/p&gt;
&lt;p&gt;My home server is a tiny box that sits on the corner of my desk. I want to treat it like an appliance as much as I can. All configuration should live on the server itself. I don't want to do anything special in my router settings to make it work. My server gets a dynamic IP address just like everything else on my network. I want to be able to turn it on and it should Just Workâ„¢ assuming it can successfully connect to a network and get assigned an IP address.&lt;/p&gt;
&lt;p&gt;I host multiple services on this one physical machine, such as a family wiki and a Plex server. My experience with setting up reverse proxies for situations like this has taught me that services I haven't developed to specifically support such a feature don't always play nice when I try to host them at different sub-paths on the same host. Path rewriting gets complicated quickly and can be fragile. Depending on the service I'm trying to run, sometimes it's just not feasible. Because of this, I need my home server to respond to multiple A records to make reverse proxying the various services as painless as possible. Using A records instead of special port numbers makes it easy to remember how to access any given service.&lt;/p&gt;
&lt;p&gt;Here's how I met these requirements using Avahi and some user-level Systemd units.&lt;/p&gt;
&lt;p&gt;The first step is to install Avahi and make sure its daemon is running. Next, add these unit files:&lt;/p&gt;
&lt;h2 id=codeconfigsystemdusermdns-publish-addressservicecode&gt;&lt;code&gt;.config/systemd/user/mdns-publish-address@.service&lt;/code&gt;&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Advertise %i.local address via mDNS&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network-online.target&lt;/span&gt;
&lt;span class="na"&gt;Wants&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network-online.target&lt;/span&gt;
&lt;span class="na"&gt;PartOf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mdns.target&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;simple&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/bin/sh -c &amp;#39;&lt;/span&gt;\
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;while [ -z &amp;quot;$(hostname -I)&amp;quot; ]; do sleep 1; done; &lt;/span&gt;\
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;IP=$(hostname -I | awk &amp;quot;{print \$1}&amp;quot;); &lt;/span&gt;\
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;exec avahi-publish-address &amp;quot;%i.local&amp;quot; &amp;quot;$IP&amp;quot; -R &lt;/span&gt;\
&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;on-failure&lt;/span&gt;
&lt;span class="na"&gt;RestartSec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;10s&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mdns.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a template for advertising the current IP address as a particular A record in addition to the default one Avahi advertises.&lt;/p&gt;
&lt;p&gt;Let's address the elephant in the room: that sleep loop. That is present because I don't want to attempt to advertise until the machine actual has an IP address. The reason I'm using a sleep loop instead of something more sophisticated like Systemd dependencies is because I'm running Debian 13, which still uses ifupdown to manage networking, not networkd or NetworkManager. It's grog-brained, but it's simple and it works.&lt;/p&gt;
&lt;p&gt;It's worth noting that I don't enable this service template directly. Keep reading.&lt;/p&gt;
&lt;h2 id=codeconfigsystemdusermdns-publish-httpservicecode&gt;&lt;code&gt;.config/systemd/user/mdns-publish-http@.service&lt;/code&gt;&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Advertise %i.local as HTTP via mDNS&lt;/span&gt;
&lt;span class="na"&gt;Requires&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mdns-publish-address@%i.service&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network-online.target mdns-publish-address@%i.service&lt;/span&gt;
&lt;span class="na"&gt;Wants&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network-online.target&lt;/span&gt;
&lt;span class="na"&gt;PartOf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mdns.target&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;simple&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;avahi-publish-service &amp;quot;%i.local&amp;quot; _http._tcp 80&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;on-failure&lt;/span&gt;
&lt;span class="na"&gt;RestartSec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;10s&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mdns.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In order for Avahi to work as expected, it needs to advertise both the A record &lt;em&gt;and&lt;/em&gt; a service, like an HTTP server in my case. Instead of making a single shell script that runs both &lt;code&gt;avahi-publish-address&lt;/code&gt; and &lt;code&gt;avahi-publish-service&lt;/code&gt;, I decided to get a little fancy and make them two separate Systemd templates such that &lt;code&gt;mdns-publish-http@.service&lt;/code&gt; depends upon an equivalent &lt;code&gt;mdns-publish-address@.service&lt;/code&gt;. That means &lt;em&gt;this&lt;/em&gt; is the only template that needs to be actualized. The other one comes along for free. Neat!&lt;/p&gt;
&lt;h2 id=codeconfigsystemdusermdnstargetcode&gt;&lt;code&gt;.config/systemd/user/mdns.target&lt;/code&gt;&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Target for mDNS service advertisement instances&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network-online.target&lt;/span&gt;
&lt;span class="na"&gt;Wants&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network-online.target&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;default.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is just a convenience target that makes it easy to bring all of the various Avahi services up and down together.&lt;/p&gt;
&lt;h2 id=enable-the-services&gt;Enable the services&lt;/h2&gt;&lt;p&gt;The last step is to enable the desired services.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl --user enable mdns-publish-http@wiki.service
systemctl --user enable mdns-publish-http@plex.service

systemctl --user enable mdns.target

systemctl --user start mdns.target
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=wait-why-not&gt;Wait, why not...?&lt;/h2&gt;&lt;p&gt;Yes, I'm fully aware that this is an unusual way to accomplish my goal. That's why I'm documenting it. Usually, you'd want to create XML files at &lt;code&gt;/etc/avahi/services&lt;/code&gt; and add the necessary entries in &lt;code&gt;/etc/avahi/hosts&lt;/code&gt;. But that doesn't work in my case for a few reasons.&lt;/p&gt;
&lt;p&gt;For one, my home server does not have a static IP address, so I don't have a static value to insert into &lt;code&gt;/etc/avahi/hosts&lt;/code&gt;. My solution works around that issue.&lt;/p&gt;
&lt;p&gt;Also, when I was attempting the more typical solution, I ran into some issues with the Avahi daemon not liking a bunch of hosts pointing at the same IP address. I honestly might have been doing something else wrong when I tried that approach. But regardless, that approach doesn't meet my stringent requirements and the one I documented here does. 'Nuff said.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/multiple-mdns-a-records-with-a-dynamic-ip-address/" rel="alternate"/>
    <category term="avahi"/>
    <category term="home server"/>
    <category term="systemd"/>
    <published>2026-02-26T22:14:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/how-to-change-your-apple-accounts-primary-email-address-without-losing-your-sanity/</id>
    <title>How To Change Your Apple Account's Primary Email Address Without Losing Your Sanity</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;Surely it can't be that complicated, &lt;em&gt;right?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;It took me nearly two months, three or four levels of support staff, multiple hours on the phone, multiple emails, submission of system diagnostics, and my very own ticket in Apple's internal issue tracking system, but I was successful. And I'm going to share the surprisingly nuanced set of steps required with you so you don't have to go through the same.&lt;/p&gt;
&lt;p&gt;First, let's set the stage. I have a MacBook Pro that is signed into my Apple account at the system level. I do not own any iOS devices. I still have access to my account and both the old and new email addresses. For the purposes of this tutorial, we'll say the current primary email address of my Apple account is &lt;em&gt;old@example.com&lt;/em&gt; and I want to change it to &lt;em&gt;new@example.com&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Please read this post in its entirety before starting the process, because if you do something Apple doesn't like, you'll be locked out of the process for 24 hours.&lt;/p&gt;
&lt;h2 id=step-1-sign-into-your-account-at-a-hrefhttpsaccountapplecomhttpsaccountapplecoma-in-safari-on-your-macbook-pro-using-emoldexamplecomem&gt;Step 1: Sign into your account at &lt;a href='https://account.apple.com'&gt;https://account.apple.com&lt;/a&gt; in Safari on your MacBook Pro using &lt;em&gt;old@example.com&lt;/em&gt;&lt;/h2&gt;&lt;p&gt;Use your original primary email address, not literally &lt;em&gt;old@example.com&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;My preferred browser is not Safari but Firefox. However, Safari is special in Apple's eyes, so be sure to use it throughout. When signing in &lt;strong&gt;this first time only&lt;/strong&gt; you may choose to use the dialog box that skips your email address and password and uses the system-level account to sign in. It will prompt you with a two-factor authentication code that appears in a system-level prompt.&lt;/p&gt;
&lt;h2 id=step-2-add-emnewexamplecomem-to-your-account-as-a-secondary-email-address&gt;Step 2: Add &lt;em&gt;new@example.com&lt;/em&gt; to your account as a secondary email address&lt;/h2&gt;&lt;p&gt;Obviously use &lt;em&gt;your&lt;/em&gt; preferred new email address, not literally &lt;em&gt;new@exmaple.com&lt;/em&gt;. You will have to verify the new email address using a link sent to that address.&lt;/p&gt;
&lt;p&gt;Next to your current primary email address, there will be a tempting button labeled "remove". &lt;strong&gt;DO NOT PRESS IT YET!&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=step-3-sign-out-of-your-apple-account-on-the-website-in-safari&gt;Step 3: Sign out of your Apple account on the website in Safari&lt;/h2&gt;&lt;p&gt;I know this seems counter-intuitive, but trust me.&lt;/p&gt;
&lt;h2 id=step-4-sign-into-your-account-at-a-hrefhttpsaccountapplecomhttpsaccountapplecoma-in-safari-on-your-macbook-pro-using-emnewexamplecomem&gt;Step 4: Sign into your account at &lt;a href='https://account.apple.com'&gt;https://account.apple.com&lt;/a&gt; in Safari on your MacBook Pro using &lt;em&gt;new@example.com&lt;/em&gt;&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;DO NOT&lt;/strong&gt; use the system-level account sign-in process at this stage. Use your new email address and password to sign in. You'll again be presented with two-factor authentication to complete your sign in.&lt;/p&gt;
&lt;h2 id=step-5-click-the-remove-button-next-to-emoldexamplecomem&gt;Step 5: Click the "remove" button next to &lt;em&gt;old@example.com&lt;/em&gt;&lt;/h2&gt;&lt;p&gt;You will be prompted at this point to provide a replacement email address for your primary email address. It's at this point that you should provide &lt;em&gt;new@example.com&lt;/em&gt; as your new primary email address.&lt;/p&gt;
&lt;p&gt;Once again, use &lt;em&gt;your actual new email address&lt;/em&gt;, not literally &lt;em&gt;new@example.com&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;You will receive a confirmation email at your new primary email address. If it asks you to click a link in the email to confirm the change, do so.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;That's right. The trick for changing your primary email address is to sign in using a secondary email address. If you fail to follow this process and instead sign in using the &lt;em&gt;old&lt;/em&gt; primary email address, this process will fail. If you attempt to complete this process with a browser that's not Safari, the ability to change your account may be locked for 24 hours.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/how-to-change-your-apple-accounts-primary-email-address-without-losing-your-sanity/" rel="alternate"/>
    <category term="Apple"/>
    <published>2026-02-22T02:45:04.846801+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/good-boy-bad-boy-1985-by-bruce-nauman/</id>
    <title>Good Boy, Bad Boy (1985) by Bruce Nauman</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/good-boy-bad-boy-1.webp" alt="" /&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Good Boy, Bad Boy" is the name of an installation artwork created by Bruce Nauman in 1985.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href='https://www.artchive.com/artwork/good-boy-bad-boy-bruce-nauman-1985/'&gt;Artchive&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It features a 100-line poem written out in multicolored neon lights.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[T]he installation employs two actors, Joan Lancaster and Tucker Smallwood, who are presented in close-up, like newscasters, on two separate monitors.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href='https://www.artic.edu/artworks/146915/good-boy-bad-boy'&gt;The Art Institute of Chicago&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Both actors recite the poem several times in a row, and the recordings loop.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Directly confronting the viewer, they deliver each repetition with increased emotional intensity, shifting in and out of sync with one another.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href='https://www.artic.edu/artworks/146915/good-boy-bad-boy'&gt;The Art Institute of Chicago&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;At least that's how the artist intended the installation to be experienced. To the best of my knowledge, this exhibit is not currently on display, and I can't determine where the physical parts of the exhibit are located. I would relish the opportunity to see the installation as intended.&lt;/p&gt;
&lt;p&gt;All that remains are the video recordings, which have been published online both as &lt;a href='https://www.youtube.com/watch?v=R9BW2SraYeo'&gt;a combined work&lt;/a&gt; that approximates the experience of the installation and as &lt;a href='https://www.youtube.com/watch?v=peruMPJ0hYo'&gt;separate&lt;/a&gt; &lt;a href='https://www.youtube.com/watch?v=vZte908vYpw'&gt;videos&lt;/a&gt; of the two actors' performances.&lt;/p&gt;
&lt;p&gt;These recordings, especially &lt;a href='https://www.youtube.com/watch?v=peruMPJ0hYo'&gt;Joan Lancaster's performance&lt;/a&gt;, are how I became familiar with this installation. I was originally shown Joan's performance without any context, which made for an oddly compelling experience. Art is deeply subjective, so I can't explain why this particular piece resonated with me. Some of the lines of the poem have made their way into my everyday lexicon. The work is endlessly memeable without it becoming the butt of the meme, unlike so much other modern art.&lt;/p&gt;
&lt;h2 id=the-poem&gt;The poem&lt;/h2&gt;&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/good-boy-bad-boy-2.webp" alt="" /&gt;&lt;/p&gt;
&lt;p&gt;Here's the text of the poem as written in neon, though the actors' recitations vary slightly.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;1. I was a good boy
2. You were a good boy
3. We were good boys
4. That was good

5. I was a good girl
6. You were a good girl
7. We were good girls
8. That was good

9. I was a bad boy
10. You were a bad boy
11. We were bad boys
12. That was bad

13. I was a bad girl
14. You were a bad girl
15. We were bad girls
16. That was bad

17. I am a virtuous man
18. You are a virtuous man
19. We are virtuous men
20. This is virtue

21. I am a virtuous woman
22. You are a virtuous woman
23. We are virtuous women
24. This is virtue

25. I am an evil man
26. You are an evil man
27. We are evil men
28. This is evil

29. I am an evil woman
30. You are an evil woman
31. We are evil women
32. This is evil

33. I&amp;#39;m alive
34. You&amp;#39;re alive
35. We&amp;#39;re alive
36. This is our life

37. I live the good life
38. You live the good life
39. We live the good life
40. This is the good life

41. I have work
42. You have work
43. We have work
44. This is work

45. I play
46. You play
47. We play
48. This is play

49. I&amp;#39;m having fun
50. You&amp;#39;re having fun
51. We&amp;#39;re having fun
52. This is fun

53. I&amp;#39;m bored
54. You&amp;#39;re bored
55. We&amp;#39;re bored
56. Life is boring

57. I&amp;#39;m boring
58. You&amp;#39;re boring
59. We&amp;#39;re boring
60. This is boring

61. I have sex
62. You have sex
63. We have sex
64. This is sex

65. I love
66. You love
67. We love
68. This is our love

69. I hate
70. You hate
71. We hate
72. This is hating

73. I like to eat
74. You like to eat
75. We like to eat
76. This is eating

77. I like to drink
78. You like to drink
79. We like to drink
80. This is drinking

81. I (like to) shit
82. You (like to) shit
83. We (like to) shit
84. This is shit(ting)

85. I piss
86. You piss
87. We piss
88. This is piss

89. I like to sleep
90. You like to sleep
91. We like to sleep
92. Sleep well

93. I pay
94. You pay
95. We pay
96. This is payment

97. I don&amp;#39;t want to die
98. You don&amp;#39;t want to die
99. We don&amp;#39;t want to die
100. This is fear of death
&lt;/pre&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;Portions of this post reproducing aspects of "Good Boy, Bad Boy" Â© 2018 Bruce Nauman / Artists Rights Society (ARS), New York&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/good-boy-bad-boy-1985-by-bruce-nauman/" rel="alternate"/>
    <category term="art"/>
    <published>2026-02-02T04:56:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/working-around-a-kernel-regression-in-debian-13/</id>
    <title>Working Around Firmware Lag in Debian 13</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; The title of the post used to be "Working Around A Kernel Regression in Debian 13". However, after finally actually solving the issue, I find that title to be inaccurate and a little click-baity.&lt;/p&gt;
&lt;p&gt;The initial post describes the symptoms of the issue and a workaround I chose that allowed me to stay on an old kernel while installing newer kernels. See &lt;a href='#2252026-update'&gt;the end of the post&lt;/a&gt; for an update that describes the true source of the problem as well as a way to work around it while using up-to-date kernels.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;I did a routine update/upgrade on my home server that runs Debian 13 today and restarted the machine since there was a kernel update and... POW! Machine is no longer on the network. Serves me right for keeping up to date.&lt;/p&gt;
&lt;p&gt;A quick look around determined that &lt;code&gt;networking.service&lt;/code&gt; is failing because my network device doesn't exist. The logs confirm that the iwlwifi driver is having an oopsy.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: enabling device (0000 -&amp;gt; 0002)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Detected crf-id 0x2001910, cnv-id 0x2001910 wfpm id 0x80000000
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: PCI dev 272b/00f4, rev=0x472, rfid=0x112200
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Detected Intel(R) Wi-Fi 7 BE200 320MHz
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-102.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-102.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-102.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-102.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-101.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-101.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-101.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-101.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-100.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-100.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-100.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-100.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-99.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-99.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-99.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-99.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-98.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-98.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: firmware: failed to load iwlwifi-gl-c0-fm-c0-98.ucode (-2)
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: Direct firmware load for iwlwifi-gl-c0-fm-c0-98.ucode failed with error -2
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: no suitable firmware found!
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: minimum version required: iwlwifi-gl-c0-fm-c0-98
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: maximum version supported: iwlwifi-gl-c0-fm-c0-102
Dec 14 14:19:36 m910q kernel: iwlwifi 0000:01:00.0: check git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I rebooted and selected the previous kernel from the Grub boot menu and wifi works again. The old, working kernel is &lt;code&gt;linux-image-6.16.3+deb13-amd64&lt;/code&gt; whereas the new, broken kernel is &lt;code&gt;linux-image-6.17.8+deb13-amd64&lt;/code&gt;. Both are provided by the bookworm-backports package repository.&lt;/p&gt;
&lt;p&gt;A quick web search found &lt;a href='https://gitlab.archlinux.org/archlinux/packaging/packages/linux/-/issues/161'&gt;a lovely issue&lt;/a&gt; filed over at Arch Linux that describes the exact issue I'm experiencing. This bug is upstream in the kernel itself.&lt;/p&gt;
&lt;p&gt;This put me in a peculiar situation. I need to stay on the old kernel until this is fixed. In the meantime, I want to continue receiving new kernel versions when I update my system so I can test if the issue has been fixed. But until that happens, I want to continue using the known-working kernel.&lt;/p&gt;
&lt;p&gt;The solution I chose was to change my Grub configuration slightly. There's a line in &lt;code&gt;/etc/default/grub&lt;/code&gt; that looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;GRUB_DEFAULT=0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That makes Grub boot with the first menu entry by default, which is the newest kernel. I changed it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#GRUB_DEFAULT=0
GRUB_DEFAULT=saved
GRUB_SAVEDEFAULT=true
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After running &lt;code&gt;sudo update-grub&lt;/code&gt;, Grub now remembers the last option I chose and uses that by default. I had to reboot one more time to choose the preferred kernel so it would remember after I changed this setting.&lt;/p&gt;
&lt;p&gt;This meets all of my desired criteria. As long as I don't uninstall &lt;code&gt;linux-image-6.16.3+deb13-amd64&lt;/code&gt;, I should be able to receive new kernel versions and test them at my leisure without worrying that any subsequent updates and reboots might make my system drop off the network again.&lt;/p&gt;
&lt;p&gt;&lt;del&gt;Although experiencing a kernel regression is annoying, this is the first instance of a regression that has affected me personally in probably two decades.&lt;/del&gt; I'm happy it wasn't my fault. And I'm grateful it was easy to diagnose and work around it.&lt;/p&gt;
&lt;h2 id=2252026-update&gt;2/25/2026 Update&lt;/h2&gt;&lt;p&gt;Today, I installed the latest backports kernel, &lt;code&gt;linux-image-6.18.9+deb13-amd64&lt;/code&gt;, and to my dismay, the issue described above persisted. I did a little more digging and I discovered this wasn't a kernel regression at all! (Apologies to the fine folks who work on the kernel.) It was lag between the latest version of the kernel available via backports and the latest version of the &lt;code&gt;firmware-iwlwifi&lt;/code&gt; package available via backports. Those ucode files mentioned in the logs are supposed to be provided via &lt;code&gt;firmware-iwlwifi&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;After checking I was indeed using the latest version of &lt;code&gt;firmware-iwlwifi&lt;/code&gt;, I fixed the problem by cloning the latest version of the &lt;code&gt;linux-firmware&lt;/code&gt; source from &lt;a href='https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git'&gt;https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git&lt;/a&gt; and checking within the &lt;code&gt;intel/iwlwifi&lt;/code&gt; directory for the files mentioned in the logs.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ls -lah intel/iwlwifi/iwlwifi-gl-c0-fm-c0-*
-rw-rw-r-- 1 server-user server-user 2.2M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-100.ucode
-rw-rw-r-- 1 server-user server-user 2.2M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-101.ucode
-rw-rw-r-- 1 server-user server-user 1.8M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-83.ucode
-rw-rw-r-- 1 server-user server-user 1.8M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-86.ucode
-rw-rw-r-- 1 server-user server-user 1.9M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-90.ucode
-rw-rw-r-- 1 server-user server-user 1.9M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-92.ucode
-rw-rw-r-- 1 server-user server-user 1.9M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-94.ucode
-rw-rw-r-- 1 server-user server-user 1.9M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-96.ucode
-rw-rw-r-- 1 server-user server-user 1.9M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-97.ucode
-rw-rw-r-- 1 server-user server-user 1.9M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-98.ucode
-rw-rw-r-- 1 server-user server-user 2.2M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-c101.ucode
-rw-rw-r-- 1 server-user server-user 2.2M Feb 25 14:55 intel/iwlwifi/iwlwifi-gl-c0-fm-c0-c102.ucode
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Yep, there are those pesky files. I just needed to copy them (as root) to the proper location: &lt;code&gt;/lib/firmware&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo cp intel/iwlwifi/iwlwifi-gl-c0-fm-c0-*.ucode /lib/firmware/
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then update the initramfs images.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo update-initramfs -u -k all
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I undid the changes I made to my Grub config from earlier, rebooted, and Bob's your uncle, everything worked again. That's how you run bleeding edge Intel drivers when Debian's firmware package is lagging behind the kernel. ðŸ™Œ&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/working-around-a-kernel-regression-in-debian-13/" rel="alternate"/>
    <category term="grub"/>
    <category term="home server"/>
    <published>2025-12-14T23:18:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/im-restarting-plex-every-24-hours-now/</id>
    <title>I'm Restarting Plex Every 24 Hours Now</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;I only use Plex because the phone app and the PlayStation app make it convenient. If Jellyfin had a native app on PlayStation, I'd switch tomorrow. I already don't completely trust Plex, which is why I run it in a Podman container. If anything goes &lt;em&gt;really&lt;/em&gt; sideways, at least the blast radius should be minimized.&lt;/p&gt;
&lt;p&gt;Plex is also flaky. I find myself occasionally needing to SSH into my home server to restart Plex when the app can't connect to the server. No errors are ever logged from the server, and even if I went to the trouble of getting logs from the apps, I doubt I could really do anything to fix it. Plex and its apps are a black box to me. I treat them less like software and more like hermetically sealed appliances. And what do you do when a hermetically sealed appliance acts up? Power cycle it!&lt;/p&gt;
&lt;p&gt;As much as I'd prefer perfect appliances, sometimes the power cycle approach has to be good enough. Most home routers have settings in their UI nowadays to automatically power cycle themselves on a regular schedule. Even the expensive ones! Especially the expensive ones. My phone runs GrapheneOS, which has an option to automatically power cycle your phone after a set period of inactivity. In that case, it's because your phone is subtly more secure before it's been unlocked after a power cycle. Like it or not, "Have you tried turning it off and on again?" is now the way of the world.&lt;/p&gt;
&lt;p&gt;I'm currently in my systemd era. Sooner or later, systemd comes for us all. ðŸª¦ The path of least resistance seems to be a service and a timer to trigger that service.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /home/server-user/.config/systemd/user/plex-restart.service&lt;/span&gt;
&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Restart Plex container service&lt;/span&gt;
&lt;span class="na"&gt;Wants&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;plex.service&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;plex.service&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;oneshot&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/bin/systemctl --user is-active --quiet plex.service &amp;amp;&amp;amp; /usr/bin/systemctl --user restart plex.service&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The service itself only attempts to restart the Plex service if the service is already active. If I should decide to manually stop the Plex service, I don't want this job to restart it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /home/server-user/.config/systemd/user/plex-restart.timer&lt;/span&gt;
&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Daily restart of Plex container service at 6 AM&lt;/span&gt;

&lt;span class="k"&gt;[Timer]&lt;/span&gt;
&lt;span class="na"&gt;OnCalendar&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;*-*-* 06:00:00&lt;/span&gt;
&lt;span class="na"&gt;Unit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;plex-restart.service&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;timers.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I have the timer set to go off every day at 6 AM because I can't imagine a situation where anyone in my household is using it at that time, so there shouldn't be any service interruption.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;daemon-reload

systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;start&lt;span class="w"&gt;  &lt;/span&gt;plex-restart.timer
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And with that, I hopefully won't have to restart Plex manually any time soon. Sure, I could have tried to rig up a script that detects the server's health and restart it only when necessary. But remember that Plex is a black box. Just because my server can essentially ping itself doesn't mean other devices can reach it. No, an automatic power switch flipper should be good enough.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/im-restarting-plex-every-24-hours-now/" rel="alternate"/>
    <category term="home server"/>
    <category term="plex"/>
    <category term="systemd"/>
    <published>2025-11-09T04:31:06.072827+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/auto-update-podman-quadlet-images/</id>
    <title>Auto Update Podman Quadlet Images</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;I &lt;a href='https://jaysherby.com/from-docker-compose-to-quadlets/'&gt;recently&lt;/a&gt; wrote about moving from Docker Compose to Podman Quadlets. I haven't had any issues with the configuration so far, but I did make one change today.&lt;/p&gt;
&lt;p&gt;My old setup made it easy to pull newer versions of images when I wanted by running &lt;code&gt;docker compose down&lt;/code&gt; followed by &lt;code&gt;docker compose up --pull=always -d&lt;/code&gt; to actually pull new images and restart the services. It was a manual process, but it was easy.&lt;/p&gt;
&lt;p&gt;Today, I looked into how I'd accomplish the equivalent action for my Podman Quadlets. It turns out that Podman has a fancy way to do this more or less automatically.&lt;/p&gt;
&lt;p&gt;First, you must enable a systemd timer that Podman provides for doing automatic updates.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;enable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;--now&lt;span class="w"&gt; &lt;/span&gt;podman-auto-update.timer
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that I'm enabling this timer &lt;em&gt;at the user level&lt;/em&gt;.  That's important since my Quadlets are also user level. The timer needs to run at the same level as the Quadlet services.&lt;/p&gt;
&lt;p&gt;Second, update the Quadlet files so that &lt;code&gt;AutoUpdate=registry&lt;/code&gt; is added in the &lt;code&gt;[Container]&lt;/code&gt; section of the file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /home/server-user/.config/containers/systemd/plex.container&lt;/span&gt;
&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Plex Media Server&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;

&lt;span class="k"&gt;[Container]&lt;/span&gt;
&lt;span class="na"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;lscr.io/linuxserver/plex:latest&lt;/span&gt;
&lt;span class="na"&gt;AutoUpdate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;registry&lt;/span&gt;

&lt;span class="na"&gt;Network&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;host&lt;/span&gt;
&lt;span class="na"&gt;UserNS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;keep-id&lt;/span&gt;

&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;TZ=America/Chicago&lt;/span&gt;
&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;VERSION=docker&lt;/span&gt;

&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/home/server-user/plex/config:/config:Z&lt;/span&gt;
&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/media/wd-gold/Television:/tv:Z&lt;/span&gt;
&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/media/wd-gold/Movies:/movies:Z&lt;/span&gt;

&lt;span class="na"&gt;AddDevice&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/dev/dri:/dev/dri&lt;/span&gt;
&lt;span class="na"&gt;PublishPort&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;32400:32400/tcp&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;default.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /home/server-user/.config/containers/systemd/tiddlywiki.container&lt;/span&gt;
&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;TiddlyWiki&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;

&lt;span class="k"&gt;[Container]&lt;/span&gt;
&lt;span class="na"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;docker.io/library/node:lts-alpine&lt;/span&gt;
&lt;span class="na"&gt;AutoUpdate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;registry&lt;/span&gt;

&lt;span class="na"&gt;UserNS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;keep-id&lt;/span&gt;

&lt;span class="na"&gt;Exec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;npx --yes tiddlywiki /wiki --listen host=0.0.0.0 port=8080&lt;/span&gt;

&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/home/server-user/wiki:/wiki:Z&lt;/span&gt;

&lt;span class="na"&gt;PublishPort&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;80:8080/tcp&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;default.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After updating the Quadlets, reload the systemd daemon and restart the services, and everything should be ready to go. Podman should check for new images daily and restart the services when appropriate.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;daemon-reload

systemctl&lt;span class="w"&gt; &lt;/span&gt;restart&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;plex.service

systemctl&lt;span class="w"&gt; &lt;/span&gt;restart&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;tiddlywiki.service
&lt;/pre&gt;&lt;/div&gt;
</content>
    <link href="https://jaysherby.com/auto-update-podman-quadlet-images/" rel="alternate"/>
    <category term="home server"/>
    <category term="plex"/>
    <category term="podman"/>
    <category term="systemd"/>
    <category term="tiddlywiki"/>
    <published>2025-11-02T03:47:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/from-docker-compose-to-quadlets/</id>
    <title>From Docker Compose to Quadlets</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;I recently migrated my home server from Debian 12 to 13 and I decided to ditch Docker for Podman. I've written about some of the differences when moving from Docker to Podman &lt;a href='https://jaysherby.com/tips-for-becoming-a-pod-person/'&gt;previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here's my old &lt;code&gt;docker-compose.yml&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;plex&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;lscr.io/linuxserver/plex:latest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;plex&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;# Host networking is simpler than trying to forward everything&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;network_mode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;host&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;TZ=America/Chicago&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;VERSION=docker&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;PUID=1000&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;PGID=1000&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/home/server-user/plex/config:/config&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/media/wd-gold/Television:/tv&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/media/wd-gold/Movies:/movies&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;devices&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/dev/dri:/dev/dri&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;unless-stopped&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;32400:32400/tcp&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;tiddlywiki&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;node:lts-alpine&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;tiddlywiki&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;entrypoint&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;npx --yes tiddlywiki /wiki --listen host=0.0.0.0 port=8080 debug-level=debug&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;healthcheck&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;wget -q --spider -o /dev/null 127.0.0.1:8080 || exit 1&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;60s&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;timeout&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;5s&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/home/server-user/wiki:/wiki&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;unless-stopped&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;80:8080/tcp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I've got a Plex server, and a TiddlyWiki running on port 80. This is not a particularly apt use of Docker Compose since I'm only really using it because it's familiar and it lets me bring the server up and down with a single command.&lt;/p&gt;
&lt;p&gt;To move to Podman, I tried what I thought would be the path of least resistance: Podman Compose. It wasn't as turn-key as I would have expected. Because Podman doesn't use a root daemon like Docker, all of my containers would die when I logged out of my user. This wasn't an issue when I used Docker since Docker's daemon was always running. To keep my user session alive, I could have chosen something like &lt;code&gt;nohup&lt;/code&gt;, &lt;code&gt;screen&lt;/code&gt;, or &lt;code&gt;tmux&lt;/code&gt;. I chose instead to turn on lingering for the user with systemd.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;loginctl&lt;span class="w"&gt; &lt;/span&gt;enable-linger&lt;span class="w"&gt; &lt;/span&gt;server-user
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Yes, &lt;a href='https://www.youtube.com/watch?v=G6Kspj3OO0s'&gt;I have to let it linger&lt;/a&gt;. RIP Dolores O'Riordan.&lt;/p&gt;
&lt;p&gt;This change at least let me continue limping along with Podman Compose until I had to chance to investigate. Because Podman is not daemon-based, &lt;code&gt;restart: unless-stopped&lt;/code&gt; doesn't work. It also means that my containers don't come back up automatically if I reboot the system. Also, my Plex container doesn't get write access to my media library, meaning I can't delete things from the Plex interface. I've tried adding &lt;code&gt;:rw&lt;/code&gt; and &lt;code&gt;:rw,Z&lt;/code&gt; and &lt;code&gt;:rw,z&lt;/code&gt; to those volumes without effect. I think it's probably because Podman Compose is automatically putting everything into a "pod", which is composed of a "Linux network namespace, IPC namespace, and (optionally) PID namespace" that can be shared between containers. There are ways to configure your compose file so that Podman doesn't do this, but the version of Podman Compose present in Debian's repos doesn't understand those options. I'd have to install a newer version of Podman Compose through pip, for example.&lt;/p&gt;
&lt;p&gt;It was about this point when I figured maybe I was using the wrong tool for the job. I decided to try Quadlets instead. They seem to be the preferred way to orchestrate Podman containers. Podman ships with support for Quadlets included. Quadlets are files that share the syntax of systemd unit files. They are run through a generator that generates actual systemd unit files. From there, the containers are managed just like any other user services, using systemd. What do you expect? Systemd and Podman both come from the folks at &lt;del&gt;Red Hat&lt;/del&gt; IBM.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /home/server-user/.config/containers/systemd/plex.container &lt;/span&gt;
&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;Plex Media Server&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;

&lt;span class="k"&gt;[Container]&lt;/span&gt;
&lt;span class="na"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;lscr.io/linuxserver/plex:latest&lt;/span&gt;

&lt;span class="na"&gt;Network&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;host&lt;/span&gt;
&lt;span class="na"&gt;UserNS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;keep-id&lt;/span&gt;

&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;TZ=America/Chicago&lt;/span&gt;
&lt;span class="na"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;VERSION=docker&lt;/span&gt;

&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/home/server-user/plex/config:/config:Z&lt;/span&gt;
&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/media/wd-gold/Television:/tv:Z&lt;/span&gt;
&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/media/wd-gold/Movies:/movies:Z&lt;/span&gt;

&lt;span class="na"&gt;AddDevice&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/dev/dri:/dev/dri&lt;/span&gt;
&lt;span class="na"&gt;PublishPort&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;32400:32400/tcp&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;default.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I don't think the &lt;code&gt;:Z&lt;/code&gt; is actually doing anything here because I don't think there are any SELinux labels in those paths, but it seems to be considered good practice and I can't imagine it hurts anything.&lt;/p&gt;
&lt;p&gt;This configuration does not exhibit the media deletion issue I experienced with Podman Compose.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Remember to fix permissions if you&amp;#39;re coming from Docker&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;chown&lt;span class="w"&gt; &lt;/span&gt;-R&lt;span class="w"&gt; &lt;/span&gt;server-user:server-user&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/home/server-user/plex&amp;quot;&lt;/span&gt;

systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;daemon-reload

systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;start&lt;span class="w"&gt; &lt;/span&gt;plex.service
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here's the one for TiddlyWiki:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /home/server-user/.config/containers/systemd/tiddlywiki.container &lt;/span&gt;
&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;TiddlyWiki&lt;/span&gt;
&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;

&lt;span class="k"&gt;[Container]&lt;/span&gt;
&lt;span class="na"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;docker.io/library/node:lts-alpine&lt;/span&gt;

&lt;span class="na"&gt;UserNS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;keep-id&lt;/span&gt;

&lt;span class="na"&gt;Exec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;npx --yes tiddlywiki /wiki --listen host=0.0.0.0 port=8080&lt;/span&gt;

&lt;span class="na"&gt;Volume&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/home/server-user/wiki:/wiki:Z&lt;/span&gt;

&lt;span class="na"&gt;PublishPort&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;80:8080/tcp&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;default.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You may notice that I don't have a health check for this service like I had for Docker Compose. It doesn't seem like Quadlets have any equivalent functionality. I could certainly create a systemd service by hand to check the service's health, but I was never really reporting or reacting to the health check's status, so I ditched it instead.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Remember to fix permissions if you&amp;#39;re coming from Docker&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;chown&lt;span class="w"&gt; &lt;/span&gt;-R&lt;span class="w"&gt; &lt;/span&gt;server-user:server-user&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/home/server-user/wiki&amp;quot;&lt;/span&gt;

systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;daemon-reload

systemctl&lt;span class="w"&gt; &lt;/span&gt;--user&lt;span class="w"&gt; &lt;/span&gt;start&lt;span class="w"&gt; &lt;/span&gt;tiddlywiki.service
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So far, this setup seems to be working. I plan on adding some more services and features in the future, like a reverse proxy to route services to friendlier mDNS A records, and an IRC bouncer service. I'll be sure to write up more posts as I add those.&lt;/p&gt;
&lt;p&gt;While I was tinkering with these Quadlet files, sometimes I'd make a mistake. When a Quadlet file is invalid, the corresponding service is not generated. After running &lt;code&gt;daemon-reload&lt;/code&gt;, trying to start the service would give me a "unit not found" error. To see detailed errors explaining what was wrong with my Quadlet file, I'd run the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/usr/libexec/podman/quadlet&lt;span class="w"&gt; &lt;/span&gt;--dryrun&lt;span class="w"&gt; &lt;/span&gt;--user
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These posts I write with the &lt;a href='https://jaysherby.com/blog/?q=home%20server'&gt;#home server&lt;/a&gt; tag are mostly just documentation for myself in the future. My previous posts have already come in handy when I make big changes to my system, like upgrading Debian. I highly recommend documenting your own projects for yourself.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/from-docker-compose-to-quadlets/" rel="alternate"/>
    <category term="home server"/>
    <category term="podman"/>
    <category term="systemd"/>
    <category term="tiddlywiki"/>
    <published>2025-10-26T00:03:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/macos-26-tahoe-applications-menu/</id>
    <title>MacOS 26 "Tahoe" Applications Menu</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;Apple recently released the newest version of MacOS, "Tahoe", with their latest UI revolution: "liquid glass".&lt;/p&gt;
&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/liquid-glass-is-great.webp" alt="" title="perfection" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;And it's going great! Everyone just loves it. /s&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;One of the less exciting changes is the replacement of the dedicated applications menu, activated from the "show apps" button on the dock, with the Spotlight search function in an applications-only filter mode. The UI is no longer fullscreen, but seeing as it is Spotlight, MacOS's dedicated search function, the search bar is front and center.&lt;/p&gt;
&lt;p&gt;And that's fine. I don't mind a keyboard-driven UI. There's just one problem...&lt;/p&gt;
&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/spotlight-application-menu.gif" alt="" /&gt;&lt;/p&gt;
&lt;p&gt;As you can see in the above video, typing anything produces no results. After thinking about this for a bit, I decided to check the Spotlight settings, something I don't recall ever doing before. I'm not what you'd call a frequent Spotlight user.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/spotlight-settings-apps.webp" alt="" title="Apps must be toggled on" /&gt;&lt;/p&gt;
&lt;p&gt;I've highlighted the option "apps" in the "results from system" section of Spotlight's options in the above screenshot. That setting was toggled off. It must be toggled on.&lt;/p&gt;
&lt;p&gt;I don't recall ever changing this option before. As I mentioned, I'm not a frequent Spotlight user. You would think Apple would make sure this was toggled on during the upgrade process to make sure their replacement for the old applications menu was guaranteed to work as expected. I'm not generally a fan of upgrades changing users' preferences, but now that Spotlight is the officially blessed way to launch applications, I can't think of a reason the user would want to prevent Spotlight from building that index. It would be appropriate to deprecate that option and always index installed applications' names.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/macos-26-tahoe-applications-menu/" rel="alternate"/>
    <category term="MacOS"/>
    <published>2025-09-29T22:29:00+00:00</published>
  </entry>
  <entry>
    <id>https://jaysherby.com/how-to-add-an-existing-git-repo-to-a-monorepo/</id>
    <title>How To Add An Existing Git Repo To A Monorepo</title>
    <author>
      <name>jaysherby</name>
      <email>hidden</email>
    </author>
    <content type="html">&lt;p&gt;At several points over the course of my career, I've found myself lifting business logic code out of a monolithic application for the purposes of reuse across multiple applications.&lt;/p&gt;
&lt;p&gt;It's almost never appropriate to simply copy the current snapshot of the files in your main branch to a new directory and &lt;code&gt;git init&lt;/code&gt;. If you leave good commit messages, the repository's commit history can document the reasons why code was changed. You should keep that if you can.&lt;/p&gt;
&lt;p&gt;Depending on the intended consumers of your new business logic library, it may make sense for the new library to live in its own repository. This makes the code migration very easy. Fork the repo and start trimming away the application portions of the code. I've done this several times and the approach works well.&lt;/p&gt;
&lt;p&gt;I recently found myself in need of a more complex migration at $JOB. The code is going to be migrated into an existing monorepo. For the purposes of this example, a repository called &lt;code&gt;alpha&lt;/code&gt; is the existing application from which I'd like to harvest its business logic. A repository called &lt;code&gt;omega&lt;/code&gt; is the monorepo I'm targeting.&lt;/p&gt;
&lt;p&gt;Here's the process I followed to achieve this commit history transplant.&lt;/p&gt;
&lt;h2 id=step-1-add-the-codealphacode-remote-temporarily-to-codeomegacode&gt;Step 1: Add the &lt;code&gt;alpha&lt;/code&gt; remote temporarily to &lt;code&gt;omega&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;Here's how my remote looks before I start:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;remote&lt;span class="w"&gt; &lt;/span&gt;-v
origin&lt;span class="w"&gt;  &lt;/span&gt;git@github.com:hexpunk/omega.git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;fetch&lt;span class="o"&gt;)&lt;/span&gt;
origin&lt;span class="w"&gt;  &lt;/span&gt;git@github.com:hexpunk/omega.git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;push&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add &lt;code&gt;alpha&lt;/code&gt;'s remote. I'm calling it &lt;code&gt;temp&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;remote&lt;span class="w"&gt; &lt;/span&gt;add&lt;span class="w"&gt; &lt;/span&gt;temp&lt;span class="w"&gt; &lt;/span&gt;git@github.com:hexpunk/alpha.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Optionally confirm it worked.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;remote&lt;span class="w"&gt; &lt;/span&gt;-v
origin&lt;span class="w"&gt;  &lt;/span&gt;git@github.com:hexpunk/omega.git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;fetch&lt;span class="o"&gt;)&lt;/span&gt;
origin&lt;span class="w"&gt;  &lt;/span&gt;git@github.com:hexpunk/omega.git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;push&lt;span class="o"&gt;)&lt;/span&gt;
temp&lt;span class="w"&gt;    &lt;/span&gt;git@github.com:hexpunk/alpha.git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;fetch&lt;span class="o"&gt;)&lt;/span&gt;
temp&lt;span class="w"&gt;    &lt;/span&gt;git@github.com:hexpunk/alpha.git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;push&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And don't forget to fetch from the new remote before continuing so branches from the new remote can be referenced.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;fetch&lt;span class="w"&gt; &lt;/span&gt;temp
From&lt;span class="w"&gt; &lt;/span&gt;github.com:hexpunk/alpha
&lt;span class="w"&gt; &lt;/span&gt;*&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;new&lt;span class="w"&gt; &lt;/span&gt;branch&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;main&lt;span class="w"&gt;                                                            &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;temp/main
&lt;span class="w"&gt; &lt;/span&gt;*&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;new&lt;span class="w"&gt; &lt;/span&gt;branch&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;staging&lt;span class="w"&gt;                                                         &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;temp/staging
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=step-2-make-a-new-branch-for-this&gt;Step 2: Make a new branch for this&lt;/h2&gt;&lt;p&gt;Nothing particularly unusual here. Make a new branch for this change and switch to it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;switch&lt;span class="w"&gt; &lt;/span&gt;-c&lt;span class="w"&gt; &lt;/span&gt;import-alpha&lt;span class="w"&gt; &lt;/span&gt;main
Switched&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;a&lt;span class="w"&gt; &lt;/span&gt;new&lt;span class="w"&gt; &lt;/span&gt;branch&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;import-alpha&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=step-3-use-the-git-subtree-command-to-import-all-files-and-their-histories&gt;Step 3: Use the git subtree command to import all files and their histories&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;subtree&lt;span class="w"&gt; &lt;/span&gt;add&lt;span class="w"&gt; &lt;/span&gt;--prefix&lt;span class="o"&gt;=&lt;/span&gt;applications/alpha/&lt;span class="w"&gt; &lt;/span&gt;temp/main
Added&lt;span class="w"&gt; &lt;/span&gt;dir&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;applications/alpha&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can see here that I've imported all of &lt;code&gt;alpha&lt;/code&gt;'s main branch (using the &lt;code&gt;temp&lt;/code&gt; remote name) to the path &lt;code&gt;applications/alpha&lt;/code&gt;. This brings all files' histories with it and adds a new commit with a commit message that looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Add &amp;#39;applications/alpha/&amp;#39; from commit &amp;#39;123bf0fd7a82a76743adb0ce224a1987fe754093&amp;#39;

git-subtree-dir: applications/alpha
git-subtree-mainline: a2ac8af27a38f08d4774a4338c5c4a6ed0f24ff0
git-subtree-split: 123bf0fd7a82a76743adb0ce224a1987fe754093
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Those three lines at the end are called &lt;a href='https://git-scm.com/docs/git-interpret-trailers'&gt;trailers&lt;/a&gt; and they're a powerful and often overlooked feature of git commit messages.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;These&lt;/em&gt; trailers are an artifact of the &lt;code&gt;git subtree&lt;/code&gt; command, a contributed shell script that ships with git. It was written by Avery Pennarun, co-founder and CEO of Tailscale. Huh. It's worth a peruse of &lt;a href='https://manpage.me/?q=git-subtree'&gt;its man page&lt;/a&gt; because it's a powerful tool for situations like this one.&lt;/p&gt;
&lt;h2 id=step-4-remove-the-temporary-remote&gt;Step 4: Remove the temporary remote&lt;/h2&gt;&lt;p&gt;Now is as good a time as any to remember to remove that temporary remote I added since I won't need it anymore.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;remote&lt;span class="w"&gt; &lt;/span&gt;remove&lt;span class="w"&gt; &lt;/span&gt;temp
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=step-5-push-your-branch-to-remote&gt;Step 5: Push your branch to remote&lt;/h2&gt;&lt;p&gt;Nothing unusual here, either. I'm just getting ready to make a pull request.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jaysherby@framework13:~/omega$&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;push&lt;span class="w"&gt; &lt;/span&gt;-u&lt;span class="w"&gt; &lt;/span&gt;origin&lt;span class="w"&gt; &lt;/span&gt;import-alpha
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=step-6-make-your-pull-request-emwithout-squashing-commitsem&gt;Step 6: Make your pull request &lt;em&gt;WITHOUT SQUASHING COMMITS!!!&lt;/em&gt;&lt;/h2&gt;&lt;p&gt;The only thing you must remember to do differently compared to most pull requests is this: &lt;strong&gt;&lt;em&gt;DO NOT SQUASH COMMITS ON MERGE&lt;/em&gt;&lt;/strong&gt;. I cannot overstate how important this is.
Depending on the repository, "squash commits" may be enabled by default for pull requests. Although this may be preferred for typical feature and bugfix merge flows, it would defeat the point of this entire exercise by squashing away all of that beautiful commit history I just worked so hard to maintain.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/repo_settings.png" alt="" title="repository setting for squash commits by default" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/jaysherby/merge_request.png" alt="" title="the squash commits option in the merge request (hi, gitlab!) is unchecked" /&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;git subtree&lt;/code&gt; command actually has a &lt;code&gt;--squash&lt;/code&gt; option that I specifically chose not to use. Squashing commits from subtree commands makes sense if I was going to use this as an alternative to &lt;code&gt;git submodule&lt;/code&gt;, which is the situation most prominently described in the documentation. In my case, having the files' histories ride along with them as they're assimilated into the monorepo is precisely the value of this operation.&lt;/p&gt;
&lt;h2 id=step-7-diligently-isolate-the-renaming-of-files-within-their-own-commits&gt;Step 7: Diligently isolate the renaming of files within their own commits&lt;/h2&gt;&lt;p&gt;Wouldn't it be terrible if I did all of this work to keep files' histories just to throw it all away? That's why I need to be really strict with myself as I move and rename files and directories. Git is really good at recognizing file movement as long as it happens in isolated commits. If I were to move the file &lt;em&gt;and&lt;/em&gt; change its contents, I risk the history looking like a delete and a create instead of a rename, which will essentially launder the history of the file for common file-wise history tools like &lt;code&gt;git blame&lt;/code&gt;.&lt;/p&gt;
</content>
    <link href="https://jaysherby.com/how-to-add-an-existing-git-repo-to-a-monorepo/" rel="alternate"/>
    <category term="git"/>
    <published>2025-07-05T20:38:00+00:00</published>
  </entry>
</feed>
